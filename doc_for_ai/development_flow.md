# 開発フロー

## 1. プロジェクトのセットアップ
- [x] Next.jsプロジェクトの作成
- [x] TypeScript設定
- [x] ESLint, Prettierの設定
- [x] Tailwind CSS, shadcn/uiのセットアップ
- [x] Supabaseクライアントの設定
- [x] 環境変数の設定

## 2. データベース設計と実装
- [x] Supabaseでpostsテーブルの作成
  - id (UUID)
  - content (text)
  - region (text)
  - parent_id (UUID, nullable)
  - created_at (timestamp with time zone)
  - updated_at (timestamp with time zone)
- [x] インデックスの作成
- [x] RLSポリシーの設定

## 3. 基本的なUI実装
- [x] レイアウトの作成
- [x] ヘッダーコンポーネントの実装
- [x] 投稿フォームコンポーネントの作成
- [x] 投稿表示コンポーネントの作成
- [x] タイムラインコンポーネントの作成

## 4. バリデーション機能の実装
- [x] 文字種制限のバリデーション関数の作成
- [x] 文字数制限のバリデーション
- [x] フォームのバリデーションUI実装
- [x] エラーメッセージの表示機能

## 5. API実装
- [x] 投稿作成APIの実装
- [x] 投稿一覧取得APIの実装
- [x] 返信投稿APIの実装
- [x] 返信一覧取得APIの実装

## 6. フロントエンド機能実装
- [x] 新規投稿機能の実装
- [x] タイムライン表示機能の実装
- [x] 返信機能の実装
- [x] 投稿詳細ページの実装
- [x] 経過時間表示機能の実装

## 7. エラーハンドリングとUX改善
- [x] ローディング状態の実装
- [x] エラー状態の実装
- [x] フォームのリアルタイムバリデーション
- [x] 投稿成功時のフィードバック

## 8. テスト実装
- [x] バリデーション関数のユニットテスト
- [x] API関数のユニットテスト
- [ ] コンポーネントのユニットテスト

## 9. デプロイ
- [ ] Vercelへのデプロイ設定
- [ ] 環境変数の設定
- [ ] 動作確認

## 10. 最終確認
- [ ] 全体的な動作確認
- [ ] パフォーマンスチェック
- [ ] アクセシビリティチェック
- [ ] セキュリティチェック

## 11. パフォーマンス最適化
- [x] データフェッチのキャッシュ設定
- [ ] パラレルデータフェッチの実装
  - TimelineSectionでのgetPostsとgetReplyCountの並列実行
  - 予想される改善効果：初回読み込み時に20-30%の速度改善
- [ ] Suspenseの配置最適化
- [ ] React Queryの導入
  - データフェッチの最適化とキャッシュ管理
  - 実装工数：3-4往復程度
  - 予想される改善効果：UXの向上、データの一貫性確保
- [ ] 仮想スクロールの実装
  - @tanstack/react-virtualを使用
  - 実装工数：3往復程度
  - 予想される改善効果：大量データ表示時のパフォーマンス改善
